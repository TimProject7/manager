<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.parker.admin.dao.QuestionDao">

	<select id="questionList" resultType="com.parker.admin.vo.QuestionVO">
select question_title, question_number,question_writedate, 'N' as question_status from question_tb
where question_number != (select distinct question_number from questionreply_tb)
union
select question_title,question_number,question_writedate, 'Y' as question_status from question_tb 
where question_number = (select distinct question_number from questionreply_tb)
	</select>

	<select id="questionDetail" resultType="com.parker.admin.vo.QuestionVO">
		select * from question_tb
		where question_number =#{question_number}
	</select>

	<select id="userInfo" resultType="com.parker.admin.vo.UserVO">
		select * from users_tb
		where
		user_number =#{user_number}
	</select>

	<insert id="questionReply">
		insert into questionReply_tb
		values(
		seq_questionreply_tb.nextval,
		#{questionReply_content},
		sysdate,#{question_image},
		#{question_number},
		#{admin_number})

	</insert>
	
</mapper>
